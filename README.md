# FFmpeg 视频转码工具脚本

帮我实现一个 Python 代码，要求如下：
1. 高兼容性，依赖于ffmpeg，但依赖越少越好
2. 支持 Windows 和 Linux 环境运行
3. 可选，英伟达的 GPU加速
4. 支持多种主流视频资源格式，如 mp4、mkv 等
5. Python 脚本可以在任意位置执行，其中输入参数为视频文件列表，（可选）输出文件夹列表
6. 媒体文件 m4s 和 mpd 在同一个文件夹下，且可迁移性好，mpd中的描述m4s应为相对路径，而不是绝对路径。
7. 执行效率应尽可能高，可以显示转码的执行进度，如 x秒，70%。
8. 自行读取视频信息的分辨率，主流格式如2k、1080p、720p，编码的规格不高于视频原规格，最小规格是480p。例如1080p编码为3种格式：1080p、720p、480p

请先给出核心的 shell 指令，再生成完整的可读性好的完整代码。

LLM对话：

1. DeepSeek R1
2. Kimi
3. Google GeminiPro 2.5
4. Calude 3.7
